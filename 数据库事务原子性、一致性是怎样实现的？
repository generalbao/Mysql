

作者：小韩说理
链接：https://www.zhihu.com/question/30272728/answer/95908054
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

原子性：一个事务内的所有SQL操作是一个整体。都执行成功才算整个事务成功。如果某个失败，则必须要会退到事务执行之前的状态，执行成功的SQL需要被撤销。
innodb通过undo log和redo log来实现。事务中，每当执行一条SQL语句对数据产生了影响，就会记录下来与之相反的操作到undo log(撤销日志）中，
例如，更新会记录之前的状态，删除会形成insert，添加会形成delete，一旦事务被回滚，则执行undo log中记录的操作，来完成恢复到之前的状态。
这里是个 逻辑恢复哦！同时，每当执行一条事务中的SQL，会将操作记录到redo log中，此时事务一旦被提交，就将该redolog中的操作，持久化到磁盘上，
数据就持久的记录下来了（ACID的D）。PS：还有，undolog才是原子性的关键。提供redolog，应该主要目的是提升磁盘的IO开销吧，如果直接写入磁盘，
IO开销，会很大。如果先将操作记录到redolog中，可以顺序的记录，批量的记录，再一起同步到磁盘上，速度会比直接写磁盘快些。 mysql在生成redolog时，
会使用 innodb log buffer，先缓冲到内存中，再同步到redolog上。速度会更快另外关于，一致性，应该是个整体概念，保证所有的mysql对象
（数据，索引，约束，日志，用户）在事务执行前后都具有完整的特性，应该是mysql所有的功能都为此服务吧！
